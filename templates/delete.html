{% extends 'body.html' %}

{% block content %}
<form action="." method="post" id="form_delete">
    {% csrf_token %}
    <div class="card card-default">
        <div class="card-header">
            <h3 class="card-title">
                <i class="fas fa-trash"></i>
                {{ title }}
            </h3>
        </div>

        <div class="card-body">
            <div class="alert alert-danger alert-dismissible">
                <h5><i class="icon fas fa-ban"></i>
                    <font style="vertical-align: inherit;">
                        <font style="vertical-align: inherit;">¡Atención!</font>
                    </font>
                </h5>
                <font style="vertical-align: inherit;">
                    <font style="vertical-align: inherit;">
                        ¿Está seguro de eliminar el registro: {{ object.id }}?
                    </font>
                </font>
            </div>
        </div>

        <div class="card-footer">
            <button type="submit" class="btn btn-primary btn-flat">
                <i class="fas fa-save"></i> Sí, aceptar
            </button>
            <a href="{{ url_reedireccion }}" class="btn btn-info btn-flat">
                <i class="fas fa-times"></i> Cancelar
            </a>
        </div>

    </div>
</form>

<script>
    // Se ejecuta cuando cualquier formulario en la página es enviado
    $('#form_delete').on('submit', function (e) {
        e.preventDefault(); // Previene el envío normal del formulario y la recarga de la página

        // Serializa los datos del formulario en un array de objetos {name: 'nombre_del_campo', value: 'valor_del_campo'}
        var parametros = $(this).serializeArray();
        var url_redireccion = '{{ url_reedireccion }}'

        enviar_datos_ajax(window.location.pathname, parametros, url_redireccion);
    });
</script>

{% endblock %}